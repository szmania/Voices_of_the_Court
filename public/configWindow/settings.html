<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <title>Voices of the Court</title>
  <link rel="stylesheet" href="config.css" />

  

</head>

<body>
  <div class="navbar">
    <ul>
      <li><a href="connection.html">Connection</a></li>
      <li><a href="actions.html">Actions</a></li>
      <li><a href="summarization.html">Summarization</a></li>
      <li><a href="prompts.html">Prompts</a></li>
      <li class="active"><a href="settings.html">Settings</a></li>
      <li><a href="system.html">System</a></li>
      <li class="help-menu"><a href="#" id="open-readme">Help</a></li>
    </ul>
  </div>

  <div class="container" id="container">

    <div class="row">
      <div class="column">

        <h2>Settings</h2>

        <div class="border">
          <div class="input-group">
            <div class="row">
              <div class="column">
                <config-number confID="maxTokens" label="max new tokens" min="0" max="4084"></config-number>
              </div>
              <div class="column">
                <config-number confID="maxMemoryTokens" label="max memory tokens" min="0" max="4084"></config-number>
              </div>
            </div>
            
            <hr>

            <div class="row">
              <div class="column">
                <config-checkbox confID="stream" label="stream messages"></config-checkbox>
              </div>

              <div class="column">
                <config-checkbox confID="cleanMessages" label="clean Messages"></config-checkbox> <tooltip-text side="top">The mod will try to remove parts of the messages that the llm shouldn't have generated, like emojis </tooltip-text>
              </div>
            </div>
            <hr>
            <div class="row">
              <div class="column">
                <config-checkbox confID="shuffleCharacterOrder" label="shuffle character order"></config-checkbox> <tooltip-text side="top">Randomize the order in which characters generate messages in multi-character conversations。在多人对话中角色乱序发言，注意：如果开启，每个角色的发言顺序将随机，可能导致llm的输出角色身份混乱</tooltip-text>
              </div>
            </div>
            <hr>
            <div class="row">
              <div class="column">
                <config-checkbox confID="dynamicCharacterSelection" label="dynamic character selection"></config-checkbox> <tooltip-text side="top">Use LLM to analyze conversation and select the next character to speak. The LLM will choose from a pool of characters who haven't spoken yet in the current round. 使用LLM分析对话内容并选择下一个发言角色，LLM将从当前轮次中未发言的角色池中选择</tooltip-text>
              </div>
            </div>
            <hr>
            <div class="row">
              <div class="column">
                <config-checkbox confID="validateCharacterIdentity" label="validate character identity"></config-checkbox> <tooltip-text side="top">When streaming is disabled and there are more than 2 characters, validate that the generated message matches the character's identity. If validation fails, regenerate up to 3 times. 当流式传输关闭且角色数量大于2时，验证生成的消息是否符合角色身份。如果验证失败，最多重新生成3次</tooltip-text>
              </div>
            </div>
            <hr>
            <div class="row">
              <div class="column">
                <config-checkbox confID="showSuggestionsButton" label="show suggestions button"></config-checkbox> <tooltip-text side="top">显示或隐藏聊天窗口中的建议按钮。控制是否显示推荐输入语句功能。Show or hide the suggestions button in the chat window. Controls whether to display the recommended input statements feature.</tooltip-text>
              </div>
            </div>
            <hr>
            <div class="row">
              <div class="column">
                <config-checkbox confID="generateSceneDescription" label="generate scene description"></config-checkbox> <tooltip-text side="top">在对话开始时自动生成场景描述，为角色提供对话背景和情境信息。Generate scene description at the start of conversation to provide context and background for characters.</tooltip-text>
              </div>
            </div>
            <hr>
            <div class="row">
              <div class="column">
                <config-checkbox confID="autoGenerateSuggestions" label="auto generate suggestions"></config-checkbox> <tooltip-text side="top">开启后，将在对话开始时和每轮对话结束后自动生成建议输入语句。When enabled, suggestions will be automatically generated at the start of conversation and after each round of dialogue.</tooltip-text>
              </div>
            </div>
            <hr>
            <div class="row">
              <div class="column">
                <config-checkbox confID="autoSendSuggestion" label="auto send suggestion"></config-checkbox> <tooltip-text side="top">开启后，选择建议选项时会自动发送消息，无需再点击发送按钮。When enabled, selecting a suggestion will automatically send the message without clicking the send button.</tooltip-text>
              </div>
            </div>
            <hr>
            <div class="row">
              <div class="column">
                <config-number confID="summariesInsertDepth" label="Summaries insert depth" min="0" max="20"></config-number>
              </div>
              <div class="column">
                <config-number confID="memoriesInsertDepth" label="Memories insert depth" min="0" max="20"></config-number>
              </div>
            </div>
            <div class="row">
              <div class="column">
                <config-number confID="descInsertDepth" label="Char desc insert depth" min="0" max="20"></config-number>
              </div>
            </div>
          </div>  
        </div>
        <br>

        <h2>Instruct settings</h2>

        <div class="border">
          
          <div class="row">
            <div class="column">
              <config-text confID="inputSequence" label="Input sequence"></config-text>
            </div>
            <div class="column">
              <config-text confID="outputSequence" label="output sequence"></config-text>
            </div>
          </div>

        </div>

      </div>
      <div class="column">

        <h2>Text-generation parameters</h2>

        

        <parameters-box confID="textGenerationApiConnectionConfig" tempDefault="0.8" freqPenDefault ="0" presPenDefault="0" topPDefault="0.9"></parameters-box>

       


      </div>
    </div>

  </div>





  <script>require("../../dist/configWindow/components/ConfigCheckbox.js")</script>
  <script>require("../../dist/configWindow/components/ConfigText.js")</script>
  <script>require("../../dist/configWindow/components/ConfigNumber.js")</script>
  <script>require("../../dist/configWindow/components/ConfigSlider.js")</script>
    <script>require("../../dist/configWindow/components/ParametersBox.js")</script>
  <script>require("../../dist/configWindow/components/tooltip.js")</script>
  <script>require("../../dist/configWindow/modelSettingsRenderer.js")</script>
  
  <script>
    // 添加帮助菜单点击事件
    document.addEventListener('DOMContentLoaded', function() {
      const openReadmeBtn = document.getElementById('open-readme');
      if (openReadmeBtn) {
        openReadmeBtn.addEventListener('click', function(e) {
          e.preventDefault();
          const { ipcRenderer } = require('electron');
          ipcRenderer.send('open-readme-window');
        });
      }
    });
  </script>
  
</body>

</html>